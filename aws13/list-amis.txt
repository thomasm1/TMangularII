#!/bin/bash

list_amis() {
# Tab sep output
# RegionName
local region_name-"$1"
aws ec2 describe-images \
	--filter \
	Name=owner-alias, Values=amazon \
	Name=name,Values="amzn-ami-hvm-* \
	Name=architecture,Values=x86_64 \
	Name=virtualization-type,Values=hvm \
	Name=root-device-type,Values=ebs \
	Name=black-device-mapping.volume-type,Values=gp2 \
	--region "$region_name" \
	--query "images[*].['$region_name',ImageId,Name,Description]"
	--output text
	}
	list_amis "us-east-2"d